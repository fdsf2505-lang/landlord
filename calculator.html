<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Калькулятор доходности — Landlord.AI</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script src="../js/main.js" defer></script>
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <a href="index.html" class="logo"><i class="fas fa-building"></i> Landlord.AI</a>
      <div class="nav-links">
        <a href="index.html">Главная</a>
        <a href="research.html">Исследование</a>
        <a href="validation.html">Валидация</a>
        <a href="business-model.html">Бизнес</a>
        <a href="roadmap.html">Развитие</a>
        <a href="tech.html">Технологии</a>
        <a href="about.html">О проекте</a>
        <a href="contact.html">Контакты</a>
        <a href="calculator.html" class="cta-button active">Рассчитать</a>
      </div>
      <button class="mobile-menu-btn"><i class="fas fa-bars"></i></button>
    </div>
  </nav>

  <main>
    <section class="hero">
      <div class="container">
        <div class="hero-content reveal">
          <h1>Калькулятор доходности квартиры</h1>
          <p class="subtitle">Введите параметры, чтобы получить рекомендацию от AI</p>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <div class="card reveal" style="max-width:760px">
          <form id="calcForm">
            <div style="display:flex; gap:1rem; flex-wrap:wrap">
              <input name="area" id="area" placeholder="Площадь (м²)" style="flex:1; padding:0.75rem; border-radius:8px; border:1px solid #e6eefc">
              <select name="district" id="district" style="flex:1; padding:0.75rem; border-radius:8px; border:1px solid #e6eefc">
                <option value="center">Центр</option>
                <option value="djal">Джал</option>
                <option value="vostok">Восток-5</option>
              </select>
              <input name="currentPrice" id="currentPrice" placeholder="Текущая ставка ($/мес)" style="flex:1; padding:0.75rem; border-radius:8px; border:1px solid #e6eefc">
            </div>

            <div style="margin-top:1rem; display:flex; gap:1rem; align-items:center">
              <button type="submit" class="btn btn-primary">Рассчитать</button>
              <button type="button" id="savePdf" class="btn">Сохранить PDF</button>
            </div>
          </form>

          <div id="result" class="reveal" style="margin-top:1.2rem; display:none">
      <div style="display:flex; gap:1.2rem; align-items:center; flex-wrap:wrap">
        <div style="flex:1; min-width:220px">
          <h3>Рекомендуемая цена: <span id="recommended">—</span> $</h3>
          <p>Прогноз доходности: <strong id="roi">—</strong>%</p>
          <ul id="aiTips" style="margin-top:0.6rem"></ul>
        </div>
        <div style="width:220px;">
          <canvas id="miniForecast" style="width:100%; height:120px"></canvas>
        </div>
      </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-col">
          <h4>Landlord.AI</h4>
          <p>Умный помощник для арендодателей в Бишкеке</p>
        </div>
        <div class="footer-col">
          <h4>Контакты</h4>
          <a href="mailto:info@landlord.ai">info@landlord.ai</a>
          <a href="tel:+996555123456">+996 (555) 123-456</a>
        </div>
        <div class="footer-col">
          <h4>Социальные сети</h4>
          <div class="social-links">
            <a href="#"><i class="fab fa-telegram"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-whatsapp"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Landlord.AI. Все права защищены.</p>
      </div>
    </div>
  </footer>

  <script>
    // Простая логика калькулятора (локальная, без AI)
    document.getElementById('calcForm')?.addEventListener('submit', function(e){
      e.preventDefault();
      const area = parseFloat(document.getElementById('area').value) || 0;
      const district = document.getElementById('district').value;
      const currentPrice = parseFloat(document.getElementById('currentPrice').value) || 0;

      // Простая эвристика рекомендуемой цены
      let multiplier = 1;
      if (district === 'center') multiplier = 1.15;
      if (district === 'djal') multiplier = 1.0;
      if (district === 'vostok') multiplier = 1.1;

      const recommended = Math.round(currentPrice * multiplier);
      const roi = ((recommended * 12) / (area * 1000)) * 100; // условная формула

      document.getElementById('recommended').textContent = recommended;
      document.getElementById('roi').textContent = roi.toFixed(1);
      const resultEl = document.getElementById('result');
      resultEl.style.display = 'block';
      resultEl.classList.add('active');

      // AI tips (simple heuristics)
      const tips = [
        `Подберите цену немного выше средней, если квартира ближе к центру.`,
        `Добавьте фотографии и короткое описание — это уменьшает простой на ~20%.`,
        `Предложите гибкие условия аренды (1-6 мес) для увеличения спроса.`
      ];
      const tipsEl = document.getElementById('aiTips');
      tipsEl.innerHTML = tips.map(t => `<li>${t}</li>`).join('');

      // Mini chart
      if (window.initMiniChart) window.initMiniChart(recommended);
    });

    document.getElementById('savePdf')?.addEventListener('click', function(){
      alert('Функция сохранения в PDF будет реализована позже.');
    });
  </script>
</body>
</html>